### MESO_INSTALL.sh

svn checkout http://svn.lmd.jussieu.fr/Planeto/trunk/MESOSCALE/LMD_MM_MARS/SIMU meso_install
chmod +x meso_install/meso_install.sh
meso_install/meso_install.sh -h 

-----------------
-- set NETCDF and WHERE_MPI variables --
-- in env file --

module purge
module load openmpi/1.6.5-ifort
module load netcdf4/4.3.3.1-ifort
declare -x WHERE_MPI=/usr/lib64/openmpi/1.6.5-ifort/bin/
declare -x NETCDF=/opt/netcdf3/ifort
declare -x NCDFLIB=$NETCDF/lib
declare -x NCDFINC=$NETCDF/include

-----------------

-- also ensure that ./ is in your PATH !!!



meso_install/meso_install.sh -v HEAD -n 2020_TEST














######################## old notes

## WHAT NEEDS TO BE DONE / CHECKED

This folder can be downloaded with
svn export http://svn.lmd.jussieu.fr/Planeto/trunk/MESOSCALE/LMD_MM_MARS/SIMU/MESORUN

-- check all the links are OK, link the code or download it with
svn co -N http://svn.lmd.jussieu.fr/Planeto/trunk code
svn update LMDZ.MARS LMDZ.COMMON MESOSCALE

-- check the LMD GCM is compiled
cd code/LMDZ.COMMON 
check arch (if needed compile IOIPSL) then
./makelmdz_fcm -cpp MESOINI -j 8 -s 2 -d 64x48x35 -arch CICLADifort -parallel mpi -p mars gcm

-- compile mesoscale
cd code/MESOSCALE/LMD_MM_MARS
makemeso -p

-- compile ini stuff (do it once mesoscale is compiled)
cd code_compiled
ln -sf ../SRC/SCRIPTS/prepare_ini
./prepare_ini
cd PREP_MARS
compile_ifort
cd WPS
configure
compile

-- get static data in http://data.spiga.fr/mesoscale_model/STATIC_DATA/
and extract them in code/MESOSCALE/LMD_MM_MARS/WPS_GEOG

## ADVICE

If a GCM diagfi.nc is already available, 
- simply put it in the gcm folder and skip the GCM running part
- cd to prep and execute
echo 1 | create_readmeteo.exe
readmeteo.exe < readmeteo.def

### NOTES

1. install folder with meso_install (and change dim in GCM)
2. modify settings (in run.def)
3. define domain
4. prepare starts for gcm or at least ensure vertical levels are compliant
then launch

